(()=>{var t={798:function(t,e,n){t=n.nmd(t),function(n,r){"use strict";var o={};n.PubSub?(o=n.PubSub,console.warn("PubSub already loaded, using existing version")):(n.PubSub=o,function(t){var e={},n=-1;function r(t,e,n){try{t(e,n)}catch(t){setTimeout(function(t){return function(){throw t}}(t),0)}}function o(t,e,n){t(e,n)}function i(t,n,i,c){var a,u=e[n],s=c?o:r;if(Object.prototype.hasOwnProperty.call(e,n))for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&s(u[a],t,i)}function c(t){var n=String(t);return Boolean(Object.prototype.hasOwnProperty.call(e,n)&&function(t){var e;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}(e[n]))}function a(t,e,n,r){var o=function(t,e,n){return function(){var r=String(t),o=r.lastIndexOf(".");for(i(t,t,e,n);-1!==o;)o=(r=r.substr(0,o)).lastIndexOf("."),i(t,r,e,n);i(t,"*",e,n)}}(t="symbol"==typeof t?t.toString():t,e,r);return!!function(t){for(var e=String(t),n=c(e)||c("*"),r=e.lastIndexOf(".");!n&&-1!==r;)r=(e=e.substr(0,r)).lastIndexOf("."),n=c(e);return n}(t)&&(!0===n?o():setTimeout(o,0),!0)}t.publish=function(e,n){return a(e,n,!1,t.immediateExceptions)},t.publishSync=function(e,n){return a(e,n,!0,t.immediateExceptions)},t.subscribe=function(t,r){if("function"!=typeof r)return!1;t="symbol"==typeof t?t.toString():t,Object.prototype.hasOwnProperty.call(e,t)||(e[t]={});var o="uid_"+String(++n);return e[t][o]=r,o},t.subscribeAll=function(e){return t.subscribe("*",e)},t.subscribeOnce=function(e,n){var r=t.subscribe(e,(function(){t.unsubscribe(r),n.apply(this,arguments)}));return t},t.clearAllSubscriptions=function(){e={}},t.clearSubscriptions=function(t){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&delete e[n]},t.countSubscriptions=function(t){var n,r,o=0;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)){for(r in e[n])o++;break}return o},t.getSubscriptions=function(t){var n,r=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&r.push(n);return r},t.unsubscribe=function(n){var r,o,i,c="string"==typeof n&&(Object.prototype.hasOwnProperty.call(e,n)||function(t){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t))return!0;return!1}(n)),a=!c&&"string"==typeof n,u="function"==typeof n,s=!1;if(!c){for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(o=e[r],a&&o[n]){delete o[n],s=n;break}if(u)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&o[i]===n&&(delete o[i],s=!0)}return s}t.clearSubscriptions(n)}}(o)),void 0!==t&&t.exports&&(e=t.exports=o),e.PubSub=o,t.exports=e=o}("object"==typeof window&&window||this)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=n(798),e=n.n(t);function r(t,e){return"metric"===t?Math.round(1.8*e+32):"imperial"===t?Math.round((e-32)/1.8):NaN}function o(t){const e=new Date(1e3*t);return{weekdayLong:Intl.DateTimeFormat("en",{weekday:"long"}).format(e),weekdayShort:Intl.DateTimeFormat("en",{weekday:"short"}).format(e),time:Intl.DateTimeFormat("en",{hour:"numeric",minute:"numeric",hour12:!1}).format(e)}}const i=(()=>{const t=document.querySelector("#search-city"),n=t.querySelector("#city-name");let r="metric";function i(){return r}return{init:function(){t.addEventListener("submit",(()=>{e().publish("new-city")})),e().publish("new-city")},getCurrentWeather:function(t){const{dt:e,humidity:n}=t.current,{weekdayShort:r,time:c}=o(e),{id:a}=t.current.weather[0],u="n"===t.current.weather[0].icon.charAt(2),s=Math.round(100*t.hourly[0].pop),{name:p}=t,{time:l}=o(t.daily[0].sunrise),{time:d}=o(t.daily[0].sunset);return{sunrise:l,sunset:d,night:u,name:p,pop:s,weekdayShort:r,time:c,temp:Math.round(t.current.temp),feels_like:Math.round(t.current.feels_like),humidity:n,wind_speed:"metric"===i()?Math.round(3.6*t.current.wind_speed):Math.round(t.current.wind_speed),id:a}},fetchWeather:async function(){try{const t=""===n.value?"London":n.value;n.value="";const[{lat:e,lon:o,name:i}]=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=1&appid=a2b73bbf19c4525e272278eaecbef43d`,{mode:"cors"}).then((t=>t.json())),c=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${o}&exclude=minutely,alerts&units=${r}&appid=a2b73bbf19c4525e272278eaecbef43d`,{mode:"cors"}).then((t=>t.json()));return c.name=i,c}catch(t){return console.log(t),-1}},getDisplayUnit:i,changeDisplayUnit:function(){r="metric"===r?"imperial":"metric"},getHourlyWeather:function(t){const e=[];for(let n=0;n<25;n+=1){const r=t.hourly[n],{time:i}=o(r.dt),c={pop:Math.round(100*r.pop),temp:Math.round(r.temp),night:"n"===r.weather[0].icon.charAt(2),id:r.weather[0].id,time:i};e.push(c)}return e},getDailyWeather:function(t){const e=[];return t.daily.forEach((t=>{const{weekdayLong:n}=o(t.dt),{min:r,max:i}=t.temp,c={tempMax:Math.round(i),tempMin:Math.round(r),weekdayLong:n,night:"n"===t.weather[0].icon.charAt(2),id:t.weather[0].id,pop:Math.round(100*t.pop)};e.push(c)})),e}}})();function c(...t){const e=document.createElement("span"),n=document.createElement("i");return t.forEach((t=>{n.classList.add(t)})),e.append(n),e}function a(t,...e){const n=void 0===t?"":t,r=document.createElement("div");return e.forEach((t=>{r.classList.add(t)})),r.textContent=n,r}(()=>{const t=document.querySelector("#change-display-unit");async function n(){const t=await i.fetchWeather(),e=i.getCurrentWeather(t),n=i.getHourlyWeather(t),r=i.getDailyWeather(t);!function(t){const e=document.querySelector(".current-weather-container");e.querySelector(".temp").textContent=`${t.temp}°`;const n=t.night?`wi wi-owm-night-${t.id}`:`wi wi-owm-day-${t.id}`;e.querySelector(".wi").setAttribute("class",n),e.querySelector(".city").textContent=`${t.name}`,e.querySelector(".date").textContent=`${t.weekdayShort}, ${t.time}`,e.querySelector(".feels").textContent=`Feels like ${t.feels_like}°`,e.querySelector(".wind-speed").textContent="metric"===i.getDisplayUnit()?`${t.wind_speed} km/h`:`${t.wind_speed} mph`,e.querySelector(".humidity").textContent=`${t.humidity}%`,e.querySelector(".pop").textContent=`${t.pop}%`,document.querySelector(".sunrise").textContent=t.sunrise,document.querySelector(".sunset").textContent=t.sunset}(e),function(t){const e=document.querySelector("#hourly-container");Array.from(e.children).forEach((t=>{t.remove()})),t.forEach((t=>{const n=function(t){const e=a("","hourly-weather-item"),n=a(t.time,"time"),r=c("wi",t.night?`wi-owm-night-${t.id}`:`wi-owm-day-${t.id}`),o=a(`${t.temp}°`,"temp"),i=a("","pop-container"),u=c("wi","wi-raindrops"),s=a(`${t.pop}%`,"pop");return i.append(u,s),e.append(n,r,o,i),e}(t);e.append(n)}))}(n),function(t){const e=document.querySelector("#daily-container");Array.from(e.children).forEach((t=>{t.remove()})),t.forEach((t=>{const n=function(t){const e=a("","daily-weather-item"),n=a(t.weekdayLong,"weekday"),r=c("wi",t.night?`wi-owm-night-${t.id}`:`wi-owm-day-${t.id}`);r.classList.add("weather-icon");const o=a(`${t.tempMax}°`,"temp","max"),i=a(`${t.tempMin}°`,"temp","min"),u=a("","pop-container"),s=c("wi","wi-raindrops"),p=a(`${t.pop}%`,"pop");return u.append(s,p),e.append(n,u,r,o,i),e}(t);e.append(n)}))}(r)}function o(){Array.from(document.querySelector("#daily-container").children).forEach((t=>{const e=i.getDisplayUnit(),n=t.querySelector(".temp.max"),o=t.querySelector(".temp.min");n.textContent=`${r(e,parseInt(n.textContent.slice(0,-1),10))}°`,o.textContent=`${r(e,parseInt(o.textContent.slice(0,-1),10))}°`})),function(){const t=i.getDisplayUnit(),e=document.querySelector(".current-weather-container"),n=e.querySelector(".temp"),o=e.querySelector(".feels"),c=e.querySelector(".wind-speed");n.textContent=`${r(t,parseInt(n.textContent.slice(0,-1),10))}°`,o.textContent=`Feels like ${r(t,parseInt(o.textContent.split(" ")[2].slice(0,-1),10))}°`,c.textContent=function(t,e){if("metric"===t){const t=parseInt(e.slice(0,-5),10);return`${Math.round(t/1.609344)} mph`}if("imperial"===t){const t=parseInt(e.slice(0,-4),10);return`${Math.round(1.609344*t)} km/h`}return NaN}(t,c.textContent)}(),Array.from(document.querySelector("#hourly-container").children).forEach((t=>{const e=i.getDisplayUnit(),n=t.querySelector(".temp");n.textContent=`${r(e,parseInt(n.textContent.slice(0,-1),10))}°`})),i.changeDisplayUnit();const e=i.getDisplayUnit();t.textContent="metric"===e?"Celsius":"Fahrenheit"}return{init:function(){t.addEventListener("click",o),e().subscribe("new-city",n)}}})().init(),i.init()})()})();